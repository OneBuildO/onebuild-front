<div class="main-container">
  <div class="progress-bar-container" *ngIf="carregando">
      <div class="progress-bar"></div>
  </div>
  <div class="breadcrumb-container">
    <div class="back-title">
      <img src="assets/icones/voltar-icon.svg" alt="Voltar" class="back-icon" (click)="onVoltar()" />
      <span>Detalhes do Projeto</span>
    </div>
  </div>

  <div class="actions" *ngIf="detalheProjeto">
    <h1>{{ detalheProjeto.nomeProjeto || '—' }}</h1>
    <p>Cliente: {{ detalheProjeto.nomeCliente || '—' }}</p>
  </div>
</div>

<div class="subMain-container">
  <div class="divisao">
    <p>Informações do projeto</p>
    <hr class="line" />
  </div>

  <div class="data-itens" *ngIf="projetoResumo">
    <div class="data-grid">
      <div class="item-data">
        <label>Cidade</label>
        <p>{{ projetoResumo.cidade || '—' }}</p>
      </div>
      <div class="item-data">
        <label>Estado</label>
        <p>{{ projetoResumo.estado || '—' }}</p>
      </div>
    </div>

    <div class="data-grid">
      <div class="item-data">
        <label>Endereço</label>
        <p>{{ projetoResumo.endereco || '—' }}</p>
      </div>
      <div class="item-data">
        <label>Categoria</label>
        <p>{{ traduzirCategoriaProjeto(projetoResumo.categoria) || '—' }}</p>
      </div>
    </div>

    <div class="data-grid">
      <div class="item-data">
        <label>Visibilidade</label>
        <p>{{ traduzirVisibilidade(projetoResumo.publico) || '—' }}</p>
      </div>
      <div class="item-data">
        <label>Status</label>
        <p>{{ traduzirStatusProjeto(projetoResumo.status) || '—' }}</p>
      </div>
    </div>

    <div class="data-grid">
      <div class="item-data">
        <label>Observações</label>
        <p>{{ projetoResumo.observacoes || '—' }}</p>
      </div>
      <div class="item-data">
        <label>Data Limite do Orçamento</label>
        <p>{{ projetoResumo.dataLimiteOrcamento | date: 'dd/MM/yyyy' }}</p>
      </div>
    </div>
  </div>
</div>

<!-- Arquivos anexados -->
<div class="subMain-container">
  <div class="divisao">
    <p>Arquivos anexados ao projeto</p>
    <hr class="line" />
  </div>

<ng-container *ngIf="arquivosNormais.length > 0; else semArquivos">
  <!-- cabeçalho -->
  <div class="data-grid header">
    <div class="item-data-title"><label>Nome</label></div>
    <div class="item-data-title"><label>Download</label></div>
  </div>

  <!-- cada linha com borda -->
  <div class="data-grid row" *ngFor="let arquivo of arquivosNormais">
    <div id="foto-e-nome" class="item-data"> 
      <img [src]="getFileIcon(arquivo.nomeArquivo)" alt="plantaBaixaIcon" style="width: 5%;">
      {{ arquivo.nomeArquivo || '—' }}
    </div>
    <div class="item-data">
      <button (click)="baixarArquivo(arquivo.id, arquivo.nomeArquivo)">
        Baixar
      </button>
    </div>
  </div>
</ng-container>


  <ng-template #semArquivos>
    <p style="margin-left: 1rem;">Nenhum arquivo encontrado.</p>
  </ng-template>

  <div class="divisao">
    <p>Planta Baixa</p>
    <hr class="line" />
  </div>

  <ng-container *ngIf="plantasBaixas.length > 0; else semPlantas">
    <div class="data-grid header">
      <div class="item-data-title"><label>Nome</label></div>
      <div class="item-data-title"><label>Download</label></div>
    </div>

    <div class="data-grid row" *ngFor="let planta of plantasBaixas">
      <div id="foto-e-nome" class="item-data">
        <img src="/assets/icones/planta-baixa-icon.svg" alt="plantaBaixaIcon" style="width: 5%;">
        {{ planta.nomeArquivo || '—' }}
      </div>
      <div class="item-data">
        <button (click)="baixarPlantaBaixa(planta.id, planta.nomeArquivo)">Baixar</button>
      </div>
    </div>
  </ng-container>

  <ng-template #semPlantas>
    <p style="margin-left: 1rem;">Nenhuma planta baixa encontrada.</p>
  </ng-template>

  <div class="button-grid">
    <button>
      Adicionar Modificações
    </button>
    <button *ngIf="isClient()" id="btn-comentario">
      Adicionar comentário
    </button>
  </div>

</div>
