<div class="main-container">
  <div class="banner">
    <h1>Agenda</h1>
    <p>Um espaço onde você pode administrar a agenda de seus projetos.</p>
  </div>

  <div class="breadcrumb-container">
    <div class="breadcrumb">
      <a (click)="onVoltarClick()">Dashboard &gt; </a>
      <span class="breadcrumb-highlight">Agenda</span>
    </div>
    <div class="actions">
      <div class="calendar-filters">
        <select [(ngModel)]="selectedYear" (change)="applyFilters()" class="filter-select">
          <option *ngFor="let y of yearOptions" [ngValue]="y">{{ y }}</option>
        </select>
        <select [(ngModel)]="selectedMonthFilter" (change)="applyFilters()" class="filter-select">
          <option *ngFor="let mo of monthObjects" [ngValue]="mo.index">{{ mo.name }}</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Calendário Mensal -->
  <div class="month-calendar">
    <div class="month-header">
      {{ meses[selectedMonthFilter] }} {{ selectedYear }}
    </div>
    <div class="calendar-grid">
      <div class="day-name" *ngFor="let d of dayNames">{{ d }}</div>
      <div
        class="day-cell"
        *ngFor="let dt of monthDays"
        [class.other-month]="dt.otherMonth"
        (click)="openCompromissoModal(dt.date)">
        <span class="date-label">{{ dt.date.getDate() }}</span>
        <ng-container *ngFor="let ev of getEventosByDate(dt.date)">
          <div class="post-it" [ngStyle]="{'background-color': ev.color}">
            {{ ev.title }}
          </div>
        </ng-container>
      </div>
    </div>
  </div>

  <!-- Modal de Compromisso -->
  <div class="modal-overlay" *ngIf="showCompModal">
    <div class="modal-content">
      <button class="modal-close" (click)="closeCompModal()">x</button>
      <h2>Compromisso - {{ modalDate | date: 'dd/MM/yyyy' }}</h2>
      <div class="modal-body">
        <label for="comp-titulo">Título</label>
        <input id="comp-titulo" type="text" [(ngModel)]="compTitulo" />

        <label for="comp-desc">Descrição</label>
        <textarea id="comp-desc" rows="3" [(ngModel)]="compDescricao"></textarea>

        <label for="comp-color">Cor do Post-it</label>
        <input id="comp-color" type="color" [(ngModel)]="compColor" />
      </div>
      <div class="modal-footer">
        <button class="btn-acao voltar" (click)="closeCompModal()">Voltar</button>
        <button class="btn-acao enviar" (click)="confirmCompromisso()">Salvar</button>
      </div>
    </div>
  </div>
</div>
